<!-- <template name="projectRoles">
  "Roles"
  {{getProjectInfo project}}
  {{project.projectCommonName}}
  {{project.projectGroup}}
</template> -->
<template name="projectSelector">

</template>
<template name="userRoleManager">
  
</template>
<template name="roleManager">
  <div class="btn-group" role="group" aria-label="Basic example">
    <button type="button" class="btn {{selectedClasses 'roles'}} option-btn" value="roles">Manage roles</button>
    <button type="button" class="btn {{selectedClasses 'user-roles'}} option-btn" value="user-roles">Assign roles to users</button>
  </div>

  <hr/>

  <!-- CRUD project roles -->
  
  <!-- { {#each project in getProjects} } -->
    <!-- <div> -->
      <!-- { {> projectRoles project=project} } -->
      <!-- (projectRolesArgs project) -->
    <!-- </div> -->
  <!-- { {/each} } -->
  <!-- assign roles to persons -->
  <!-- add permissions to roles -->

  <div class="form-group">
    <label class="col-lg-3 control-label">Project affiliated:</label>
    <div class="col-lg-8">
      <select class="form-control project_id" name="project_list" required>
        <option>Select a project</option>
        {{#each getProjects}}
          <option {{isProjectSelected projectId}} value="{{projectId}}">{{projectName}}</option>
        {{/each}}
      </select>
    </div>
  </div>
  
  <hr/>
  <div>
    {{#each getHomeRoles}}
      <div>
        <!-- Role permissions -->
        <h3>{{title}} permissions</h3>
        <ul>
          {{#each permission in getPermissions}}
          <li>
            {{permission.name}} {{isPermissionInRole permission.name}}
          </li>
          {{/each}}
        </ul>
      </div>
    {{/each}}
  </div>
  {{#if isSelected 'roles'}}

  <form id="js-frm-role-manager">
    <input type="submit" class="btn btn-primary js-update" value="Save" />
    <input type="submit" class="btn btn-warning js-reset" value="Reset" />
    <div class="table-responsive">
      <table id="roleManagerTable" class="table table-striped table-hover">
        <thead>
          <th></th>
          {{#each getHomeRoles}}
          <th>{{title}}</th>
          {{/each}}
        </thead>
        <tbody>
          {{#each permission in getPermissions}}
          <tr>
            <td>{{permission.name}}</td>
            {{#each getHomeRoles}}
            <td>
              <input class="js-tooltip" type="checkbox"
                    name="rolePermissions[{{permission.name}}][{{title}}]" value="1"
                    data-toggle="tooltip" data-placement="right"
                    title="{{permission.name}} -> {{title}}" {{isPermissionInRole permission.name}} /></td>
            {{/each}}
          </tr>
          {{/each}}
        </tbody>
        <tfoot>
          <th></th>
          {{#each getHomeRoles}}
          <th>{{title}}</th>
          {{/each}}
        </tfoot>
      </table>
    </div>
    <input type="submit" class="btn btn-primary js-update" value="Submit" />
    <input type="submit" class="btn btn-warning js-reset" value="Reset" />
  </form>
  {{else}}
    <h1>User roles</h1>
  {{/if}}
</template>
